<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Tillynet | Tilly Net</title>
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="author" content="">
<link rel="canonical" href="https://blog.tillynet.com/tags/tillynet/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<link rel="icon" href="https://blog.tillynet.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://blog.tillynet.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://blog.tillynet.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://blog.tillynet.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://blog.tillynet.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="https://blog.tillynet.com/tags/tillynet/index.xml">
<link rel="alternate" hreflang="en" href="https://blog.tillynet.com/tags/tillynet/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://blog.tillynet.com/tags/tillynet/">
  <meta property="og:site_name" content="Tilly Net">
  <meta property="og:title" content="Tillynet">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="website">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Tillynet">
<meta name="twitter:description" content="">

</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://blog.tillynet.com/" accesskey="h" title="Tilly Net (Alt + H)">Tilly Net</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://blog.tillynet.com/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="https://blog.tillynet.com/my-home-lab-journey/" title="My Home Lab Journey">
                    <span>My Home Lab Journey</span>
                </a>
            </li>
            <li>
                <a href="https://blog.tillynet.com/about/" title="About">
                    <span>About</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header">
  <h1>
    Tillynet
  </h1>
</header>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Current Running Version of TillyNet
    </h2>
  </header>
  <div class="entry-content">
    <p>Current Running Version of TillyNet TillyNet is my custom-built home lab environment designed to practice enterprise-grade network segmentation, high availability, and security enforcement using open-source tools. This architecture simulates production-level infrastructure and showcases my capabilities in network engineering, virtualization, firewall administration, and Linux system management.
Network Topology !
Network Design Objectives Layer 2/3 segmentation using VLANs Centralized routing and firewalling with pfSense Hypervisor-based infrastructure using Proxmox VE Containerized services for DNS and wireless controller management Policy-based access control enforced through inter-VLAN firewall rules Minimal trust zones with internal DNS filtering and strict pathing VLAN Overview VLAN ID Purpose Subnet 1 Default/legacy 172.16.7.0/24 14 Guest Wi-Fi 172.16.14.0/24 21 Production DNS 172.21.21.0/24 99 Management Access 172.16.99.0/24 666 Native Trunk VLAN N/A Each VLAN is routed via a pfSense firewall using a router-on-a-stick model over a single trunk interface connected to a managed Cisco Catalyst switch.
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-04-22 00:00:00 +0000 UTC'>April 22, 2025</span>&nbsp;·&nbsp;6 min</footer>
  <a class="entry-link" aria-label="post link to Current Running Version of TillyNet" href="https://blog.tillynet.com/my-home-lab-journey/current-running-version-of-tillynet/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Experimenting With Network Topologies
    </h2>
  </header>
  <div class="entry-content">
    <p>Creating a Network Topology Using Graphviz and diagrams Package in Python This post outlines my initial attempts at visualizing the architecture of my home lab environment using Python-based tools. Given the complexity of my setup, traditional visualization methods weren’t sufficient. After coming across a post about using the graphviz engine with the diagrams Python package, I decided to experiment with it.
The toolchain proved useful for rendering simple network flows, and while it doesn’t fully capture the complexity of my environment, it’s a valuable starting point for documentation and network planning. Below is a walkthrough of how to get started, along with a sample script and the resulting topology diagram.
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-04-21 00:00:00 +0000 UTC'>April 21, 2025</span>&nbsp;·&nbsp;4 min</footer>
  <a class="entry-link" aria-label="post link to Experimenting With Network Topologies" href="https://blog.tillynet.com/my-home-lab-journey/experimenting-with-network-topologies/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Building My Publishing Pipeline: Obsidian → Hugo → GitHub → Hostinger
    </h2>
  </header>
  <div class="entry-content">
    <p>Obsidian → Hugo → GitHub → Hostinger Automation Workflow This post documents the full setup of my static site publishing pipeline that automates taking blog posts from Obsidian, rendering them with Hugo, pushing the output to GitHub, and then having Hostinger automatically update my website via webhook.
Tools Used Obsidian – Markdown note-taking and blog writing Hugo – Static site generator using the PaperMod theme Hugo PaperMod Wiki My Hugo yaml File GitHub – Repository with two branches: master → Hugo project &amp; content hostinger → Static site output Hostinger – Web hosting platform with webhook integration Python – Automation script for content syncing and site deployment My Automation Script 📁 Folder Structure 📂 Local_Obsidian_Vault/ └── my-home-lab-journey/ ├── post-1/ └── index.md ├── post-2/ └── index.md ├── post-3/ └── index.md └── ... 📂 tillynetblog/ ├── hugo.yaml ├── content/ │ └── my-home-lab-journey/ ├── public/ ├── themes/ │ └── PaperMod/ └── static/ └── images └── css/custom.css What the Automation Script Does Imports import os import shutil import subprocess import re os: for filesystem operations like path handling shutil: for copying/removing files and directories subprocess: for running shell commands like hugo and git re: for finding image links in markdown via regular expressions Configuration obsidian_dir = r&#34;C:\Users\micha\Documents\Local_Obsidian_Vault\my-home-lab-journey&#34; hugo_root_dir = r&#34;C:\Users\micha\Documents\tillynetblog&#34; hugo_content_dir = os.path.join(hugo_root_dir, &#34;content&#34;, &#34;my-home-lab-journey&#34;) attachments_dir = r&#34;C:\Users\micha\Documents\Local_Obsidian_Vault\assets\images&#34; static_images_dir = os.path.join(hugo_root_dir, &#34;static&#34;, &#34;images&#34;) about_src = r&#34;C:\Users\micha\Documents\Local_Obsidian_Vault\pages\about.md&#34; about_dst_dir = os.path.join(hugo_root_dir, &#34;content&#34;, &#34;about&#34;) about_dst = os.path.join(about_dst_dir, &#34;index.md&#34;) base_url = &#34;https://blog.tillynet.com&#34; Sets paths to: Obsidian content (obsidian_dir) Hugo blog folder Where to copy markdown posts Where Obsidian images are and where to move them Source/destination for the about.md file The blog’s base URL for Hugo STEP 1: Copy Markdown Posts if os.path.exists(hugo_content_dir): shutil.rmtree(hugo_content_dir) shutil.copytree(obsidian_dir, hugo_content_dir) print(&#34;✔ Copied markdown posts from Obsidian.&#34;) Deletes existing markdown content in Hugo Copies fresh markdown files from Obsidian Confirms the copy STEP 2: Convert Image Embeds and Copy Images for subdir, _, files in os.walk(hugo_content_dir): for filename in files: if filename.endswith(&#34;.md&#34;): ... iterates through every markdown file in the blog content images = re.findall(r&#39;\[\[([^]]*\.png)\]\]&#39;, content) Looks for image link like (example.png) for image in images: markdown_image = f&#34;![Image](/images/{image.replace(&#39; &#39;, &#39;%20&#39;)})&#34; Replaces with standard Markdown image syntax src_image = os.path.join(attachments_dir, image) if os.path.exists(src_image): shutil.copy(src_image, static_images_dir) copies matching images from Obsidian to Hugo’s static image folder with open(md_path, &#34;w&#34;, encoding=&#34;utf-8&#34;) as file: file.write(content) Overwrites the file with the updated content print(&#34;✔ Processed images and updated markdown links.&#34;) Confirms processing is complete STEP 3: Copy About Page if os.path.exists(about_src): os.makedirs(about_dst_dir, exist_ok=True) shutil.copyfile(about_src, about_dst) print(&#34;✔ Updated About page as /about/index.md.&#34;) else: print(&#34;⚠ About page not found in Obsidian vault; skipping.&#34;) Copies about.md from Obsidian to Hugo content Skips and warns if the file is missing STEP 4: Clean Existing public/ Folder public_dir = os.path.join(hugo_root_dir, &#34;public&#34;) if os.path.exists(public_dir): shutil.rmtree(public_dir) print(&#34;✔ Cleaned existing public/ folder.&#34;) Removes the old public/ folder Forces Hugo to rebuild the entire static site from scratch, picking up all new pages and changes STEP 5: Build the Hugo Site subprocess.run([&#34;hugo&#34;, &#34;--buildDrafts&#34;, &#34;--buildFuture&#34;, &#34;-b&#34;, base_url], cwd=hugo_root_dir, check=True) print(&#34;✔ Hugo site built with baseURL.&#34;) Builds the site using the hugo command with my specified BaseURL STEP 6: Push Source Files to GitHub master subprocess.run([&#34;git&#34;, &#34;checkout&#34;, &#34;master&#34;], cwd=hugo_root_dir, check=True) subprocess.run([&#34;git&#34;, &#34;add&#34;, &#34;.&#34;], cwd=hugo_root_dir, check=True) subprocess.run([&#34;git&#34;, &#34;commit&#34;, &#34;-m&#34;, &#34;Update blog content&#34;], cwd=hugo_root_dir, check=False) subprocess.run([&#34;git&#34;, &#34;push&#34;, &#34;origin&#34;, &#34;master&#34;], cwd=hugo_root_dir, check=True) print(&#34;✔ Pushed changes to GitHub master.&#34;) Commits and pushes all changes to the master branch STEP 7: Deploy Public Folder to hostinger Branch subprocess.run([&#34;git&#34;, &#34;subtree&#34;, &#34;split&#34;, &#34;--prefix&#34;, &#34;public&#34;, &#34;-b&#34;, &#34;hostinger-deploy&#34;], cwd=hugo_root_dir, check=True) subprocess.run([&#34;git&#34;, &#34;push&#34;, &#34;origin&#34;, &#34;hostinger-deploy:hostinger&#34;, &#34;--force&#34;], cwd=hugo_root_dir, check=True) subprocess.run([&#34;git&#34;, &#34;branch&#34;, &#34;-D&#34;, &#34;hostinger-deploy&#34;], cwd=hugo_root_dir, check=True) print(&#34;✔ Deployed public/ folder to GitHub hostinger branch.&#34;) Splits public/ into a new branch Pushes it forcefully to the hostinger branch on GitHub (used for site deployment) Deletes the temporary hostinger-deploy branch This is necessary for our webhook to recognize the changes Issues I Encountered CSS Not Applying on Deployed Site Root Cause: Hostinger was caching fingerprinted CSS
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-04-20 00:00:00 +0000 UTC'>April 20, 2025</span>&nbsp;·&nbsp;4 min</footer>
  <a class="entry-link" aria-label="post link to Building My Publishing Pipeline: Obsidian → Hugo → GitHub → Hostinger" href="https://blog.tillynet.com/my-home-lab-journey/building-my-publishing-pipeline-obsidian-hugo-github-hostinger/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Pi-hole DNS Migration to Production VLAN
    </h2>
  </header>
  <div class="entry-content">
    <p>Pi-hole DNS Migration to Production VLAN Overview This phase of the HomeLab project documents the successful migration of the internal Pi-hole DNS server from the flat LAN network to a newly created and isolated Production VLAN. This change enhances security, improves segmentation, and prepares the environment for scalable DNS resolution across all other VLANs.
Objectives Create and configure a dedicated Production VLAN on pfSense Migrate the Pi-hole LXC container to the new VLAN Ensure inter-VLAN DNS resolution using Pi-hole Apply proper firewall rules to restrict unnecessary access Update DHCP DNS settings across all VLANs Network Summary Component Before Migration After Migration Pi-hole Location LAN network (untagged) Production VLAN (tagged) VLAN ID - Production VLAN ID Subnet LAN Subnet Production Subnet Pi-hole IP LAN Assigned IP VLAN-assigned static IP Access Open to LAN Inter-VLAN DNS only (port 53) Steps Performed 1. Created Production VLAN in pfSense Navigated to Interfaces &gt; Assignments &gt; VLANs Assigned a unique VLAN tag and set the parent interface (LAN) Created new interface, enabled it, and assigned a static IPv4 gateway 2. Updated Pi-hole LXC Container Configuration Edited the container via Proxmox: pct set &lt;CTID&gt; -net0 name=eth0,bridge=vmbr0,tag=&lt;VLAN_ID&gt;,ip=&lt;Pi-hole_IP&gt;/24,gw=&lt;VLAN_Gateway&gt; </p>
  </div>
  <footer class="entry-footer"><span title='2025-04-20 00:00:00 +0000 UTC'>April 20, 2025</span>&nbsp;·&nbsp;1 min</footer>
  <a class="entry-link" aria-label="post link to Pi-hole DNS Migration to Production VLAN" href="https://blog.tillynet.com/my-home-lab-journey/pi-hole-dns-migration-to-production-vlan/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Remote SDN Recovery &amp; VLAN Isolation via VPN &amp; Shell Access
    </h2>
  </header>
  <div class="entry-content">
    <p>Remote SDN Recovery &amp; VLAN Isolation via VPN &amp; Shell Access Overview In this project, I successfully re-established full access to my network management stack (Omada Controller, Proxmox GUI, and LXC containers) after losing access due to misconfigured VLAN trunking. The recovery was performed entirely off-site, using only a mobile device connected via an OpenVPN tunnel.
Background I transitioned my home lab management network to VLAN 99 to achieve full traffic isolation. In the process of re-tagging Proxmox and LXC container traffic and reconfiguring Cisco switch trunk ports, I lost access to the Omada Controller and Proxmox GUI. With no local access to the console, I needed a remote solution.
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-04-18 00:00:00 +0000 UTC'>April 18, 2025</span>&nbsp;·&nbsp;4 min</footer>
  <a class="entry-link" aria-label="post link to Remote SDN Recovery & VLAN Isolation via VPN & Shell Access" href="https://blog.tillynet.com/my-home-lab-journey/remote-sdn-recovery-vlan-isolation-via-vpn-shell-access/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Creating Network Management Isolation
    </h2>
  </header>
  <div class="entry-content">
    <p>02 - Migrating to a Dedicated Management VLAN (VLAN 99) This phase documents the migration of all core management infrastructure to an isolated VLAN (VLAN 99) for improved security, network segmentation, and long-term scalability. This included Proxmox GUI access, Omada Controller LXC, and strict firewall rules enforced via pfSense.
Goals Remove critical services from default/native VLAN Assign a dedicated, isolated VLAN (VLAN 99) for: Proxmox management GUI Omada Controller (LXC) Trunk management VLAN through switch to Proxmox Implement firewall rules to allow remote admin access only Preserve service availability during transition Pre-Migration Topology Component Network VLAN Interface Description Proxmox Host LAN VLAN 1 vmbr0 Static IP via native VLAN Omada Controller LAN VLAN 1 vmbr0 LXC container, web GUI on port 8043 Pi-hole LAN VLAN 1 vmbr0 DNS LXC VPN Tunnel LAN VLAN 1 pfSense Remote client-to-site access Post-Migration Topology Component Network VLAN Interface Description Proxmox Host Management VLAN 99 vmbr1.99 Tagged IP for GUI access via vmbr1 Omada Controller Management VLAN 99 vmbr1 (tagged) LXC container with VLAN tag 99 Pi-hole LAN VLAN 1 vmbr0 LXC container Trunk Port (Switch) Trunked Port 1,99,14 enp1s0 Connected to VLAN-aware bridge vmbr1 VPN Tunnel Routed to MGMT VLAN 99 pfSense Allows external admin access to VLAN 99 Migration Steps 1. Create VLAN 99 in pfSense Interfaces &gt; Assignments &gt; VLANs Created VLAN 99 on the LAN parent interface Assigned it as a new interface and renamed it to MGMT Enabled the interface and set a static IP (management subnet) 2. Configure Proxmox Bridge for VLAN Tagging Created a new VLAN-aware bridge and subinterface in /etc/network/interfaces:
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-04-15 00:00:00 +0000 UTC'>April 15, 2025</span>&nbsp;·&nbsp;2 min</footer>
  <a class="entry-link" aria-label="post link to Creating Network Management Isolation" href="https://blog.tillynet.com/my-home-lab-journey/creating-network-management-isolation/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">The Big Bang (How it All Began)
    </h2>
  </header>
  <div class="entry-content">
    <p>HomeLab: Initial Network Setup This project documents the first working phase of my home network infrastructure built on top of Proxmox, using pfSense as a virtual firewall/router and LXC containers to host internal services. The design lays the foundation for a scalable, secure, and isolated home lab environment.
Overview Hypervisor: Proxmox VE running on Protectli Vault VP2420 (Intel J6412, 4 NICs) Router/Firewall: pfSense VM Internal Services: Pi-hole (LXC) – local recursive DNS &#43; ad-blocking Omada Controller (LXC) – TP-Link AP management LAN Devices: Proxmox host, personal workstation, AP, switch Guest Devices: IoT &amp; roommate devices on isolated VLAN 14 Infrastructure at a Glance Component Description pfSense VM with two PCI-passthrough NICs (WAN &#43; LAN) vmbr0 Bridge for LAN (Proxmox &#43; LXCs) vmbr1 Reserved for future VLAN tagging (e.g., mgmt) Pi-hole LXC container for DNS (on LAN) Omada Ctrl LXC container managing TP-Link EAP670 AP Cisco Switch Access switch trunking VLANs to Proxmox/AP Guest VLAN 14 WiFi-only VLAN for roommate &amp; IoT devices Setup Timeline Phase 1 – Core Infrastructure Flashed Proxmox onto Protectli Vault Created pfSense VM with 2 passthrough NICs: WAN: connected to ISP modem LAN: connected to Cisco switch (trunk-ready) Configured vmbr0 as LAN bridge in Proxmox Gave Proxmox host static IP on the LAN network Phase 2 – Internal Services Provisioned LXC container for Pi-hole Static IP assigned Configured upstream DNS servers (e.g., Cloudflare) Provisioned LXC container for Omada Controller Used to manage TP-Link EAP670 AP Served on LAN via Omada web GUI (port 8043) Phase 3 – Wireless &amp; Guest VLAN Set up VLAN 14 in pfSense (Guest Network) Trunked VLANs through switch port to Omada AP Created isolated wireless SSID mapped to VLAN 14 Configured firewall rules in pfSense: Guests can access WAN only Blocked access to LAN and Pi-hole Verified DHCP lease and internet access for guests Observed isolated traffic from personal network Security Practices Created distinct VLANs for guest vs personal network Isolated Pi-hole to LAN access only Disabled inter-VLAN routing from Guest → LAN Assigned firewall rules by interface in pfSense Reserved management services for trusted VLAN only To-Do / Next Steps Create VLAN 99 for network management Move Proxmox GUI and Omada Controller to VLAN 99 Add remote access via OpenVPN (completed later) Diagram full topology and backup strategy Network Diagram ...</p>
  </div>
  <footer class="entry-footer"><span title='2025-04-10 00:00:00 +0000 UTC'>April 10, 2025</span>&nbsp;·&nbsp;3 min</footer>
  <a class="entry-link" aria-label="post link to The Big Bang (How it All Began)" href="https://blog.tillynet.com/my-home-lab-journey/the-big-bang-how-it-all-began/"></a>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://blog.tillynet.com/">Tilly Net</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
